# Update All Context Tool

## Tool Overview

- **Name**: Update All Context
- **Purpose**: Orchestrate execution of all context generation tools to ensure complete GitHub Copilot synchronization
- **Category**: Context Generation

## Functionality

### Description
The Update All Context tool serves as a master orchestrator that runs all context generation tools in the correct order to ensure GitHub Copilot has comprehensive, up-to-date understanding of the project. This tool provides a single command to refresh all context files after specification changes.

### Input Sources
- All input sources used by individual tools:
  - `/specs/` directory (via spec-extractor)
  - Project structure (via copilot-instructions updater)
  - Source code (via quick-reference and todo updaters)

### Output Targets
- All output files generated by individual tools:
  - `./context-for-copilot.js`
  - `./docs/copilot-quick-reference.md`
  - `./.github/instructions/copilot-instructions.md`
  - `./TODO.md`

### Processing Logic
1. Execute spec-extractor to generate context file
2. Execute quick-reference updater to generate developer reference
3. Execute copilot-instructions updater to generate comprehensive instructions
4. Execute todo updater to generate task lists
5. Provide consolidated success/failure reporting
6. Handle individual tool failures gracefully

## Configuration

### Required Parameters
- None (delegates to individual tools)

### Optional Parameters
- All parameters are delegated to individual tools
- Tools use their default configurations unless individually configured

### Environment Dependencies
- Node.js runtime environment
- All dependencies required by individual tools
- File system permissions for all tool operations

## Usage

### Command Line Interface
```bash
node tools/update-all-context.js
```

### NPM Script Integration
```bash
npm run update-context
```

### Programmatic API
```javascript
const updateAllContext = require('./tools/update-all-context.js');
await updateAllContext();
```

## Dependencies

### Input Dependencies
- All tools must be available and executable:
  - `tools/spec-extractor.js`
  - `tools/update-quick-reference.js`
  - `tools/update-copilot-instructions.js`
  - `tools/update-todos.js`

### File Dependencies
- All file dependencies of individual tools
- `/tools` directory with all tool scripts

### System Dependencies
- Node.js fs module
- Node.js path module
- Node.js child_process module (for tool execution)

## Output Format

### File Structure
Multiple output files as generated by individual tools

### Content Format
Console output with execution status:
```
üöÄ Updating all Copilot context files...

üìã Extracting specification context...
[spec-extractor output]

üìö Updating quick reference...
[quick-reference updater output]

üìñ Updating copilot instructions...
[copilot-instructions updater output]

üìù Updating TODO list from specifications...
[todo updater output]

‚ú® All Copilot context files updated successfully!
üìù Files updated:
   - context-for-copilot.js
   - docs/copilot-quick-reference.md
   - .github/instructions/copilot-instructions.md
   - TODO.md
```

### Naming Conventions
- No specific file naming (delegates to individual tools)
- Console output uses emoji and clear status messages

## Error Handling

### Error Conditions
1. Individual tools are missing or not executable
2. Tool execution fails with errors
3. Partial failures (some tools succeed, others fail)
4. System-level issues (permissions, disk space)

### Error Messages
- Missing tools: Console error with tool path
- Execution failures: Console error with tool name and error details
- Partial failures: Warning with list of failed tools
- System errors: Console error with system context

### Recovery Behavior
- Tool missing: Skip that tool and continue with others
- Tool failure: Report error but continue with remaining tools
- Multiple failures: Report all failures and exit with error code
- System errors: Stop execution and exit with error code

## Testing

### Test Scenarios
1. **All tools available**: Complete successful execution
2. **Missing tools**: Some tools not found in tools directory
3. **Tool failures**: Individual tools fail during execution
4. **Partial success**: Mix of successful and failed tool executions
5. **Permission issues**: Various file system permission scenarios
6. **Clean environment**: First-time execution with no existing output files
7. **Incremental updates**: Running after previous successful execution

### Expected Outcomes
- **Complete success**: All tools execute successfully, all output files updated
- **Partial success**: Some tools succeed, clear reporting of failures
- **Complete failure**: Clear error reporting with actionable information

### Validation Methods
1. Check that all expected output files are created/updated
2. Verify console output includes status for each tool
3. Confirm error handling works for various failure scenarios
4. Test that individual tool configurations are properly passed through
5. Validate that execution order is maintained
6. Ensure that tool failures don't prevent other tools from running
7. Check that final status reporting is accurate